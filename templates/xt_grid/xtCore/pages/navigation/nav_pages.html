
{assign var=padding value=2}

{if $pages|@count gt 1}
{foreach from=$pages item=page_link key=pager_number}

<!-- first always -->
{if $pager_number==1}
<a href="{$page_link}" {if $pager_number==$actual_page-1}rel="prev"{elseif $pager_number==$actual_page}class="navigation_selected"{/if}>{$pager_number}</a>&nbsp;
{/if}

<!-- middle block -->
<!-- dots before middle block , check padding, no dots between 1 and 2-->
{if
$actual_page - $padding == $pager_number &&
$actual_page - $padding > 1 &&
$actual_page - $padding -1  > 1
}...{/if}

{if $pager_number!=1 && $pager_number!=$last_page && $pager_number>=$actual_page-$padding && $pager_number<=$actual_page+$padding}
<a href="{$page_link}" {if $pager_number==$actual_page-1}rel="prev"{elseif $pager_number==$actual_page+1}rel="next"{elseif $pager_number==$actual_page}class="navigation_selected"{/if}>{$pager_number}</a>&nbsp;
{/if}

<!-- dots after middle block , check padding, no dots between second last and last-->
{if
$actual_page + $padding == $pager_number &&
$actual_page + $padding < $last_page &&
$actual_page + $padding + 1 < $last_page
}...{/if}

<!-- last always -->
{if $pager_number==$last_page}
<a href="{$page_link}" {if $pager_number==$actual_page+1}rel="next"{elseif $pager_number==$actual_page}class="navigation_selected"{/if}>{$pager_number}</a>&nbsp;
{/if}

{/foreach}
{/if}


